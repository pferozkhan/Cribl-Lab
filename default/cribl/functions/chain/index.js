exports.name="Chain";exports.version="1.3";exports.cribl_version="3.2.0";exports.disabled=false;exports.handleSignals=true;exports.group="Advanced";exports.asyncTimeout=-1;let logger;let processorId;let signature;let processor;exports.init=async r=>{processorId=r.conf?.processor;signature=`${r.cid}:${r.pid}${r.pipeIdx!=null?":"+r.pipeIdx:""}`;logger=C.util.getLogger("func:chain",{signature,processorId});logger?.info("creating new processor");if(!processorId){throw new Error("Validation Error: processor parameter cannot be empty")}try{const e=`pipe:${r.pid}.${C.Misc.uuidv4()}`;processor=await(r.pipelineResolver?.getEventProcessor(processorId,e))||await C.internal.getEventProcessor(processorId);if(processor==null){logger?.warn(`processor is null`)}}catch(r){logger.warn("failed to create event processor, function will act as a pass thru",{error:r});exports.sync=true}if(processor?.isSync){exports.sync=processor?.isSync()}};exports.process=r=>{if(processor==null||processor.isClosed()){return r}const e=processor.process(r);if(exports.sync){let r;e.then((e=>r=e));return r}return e};exports.unload=()=>{logger?.info("closing processor");processor?.close();processor=null};